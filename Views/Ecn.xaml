<Page x:Class="ECN.Views.Ecn"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:ui="http://schemas.modernwpf.com/2019"
      xmlns:dd="urn:gong-wpf-dragdrop"
      xmlns:local="clr-namespace:ECN.Views"
      DataContext="{Binding EcnViewModel, Source={StaticResource Locator}}"
      mc:Ignorable="d" 
      d:DesignHeight="650" d:DesignWidth="800"
      Title="Ecn">

    <Page.Resources>
        <DataTemplate x:Key="RequiredHeaderTemplate">
            <TextBlock Text="{Binding}"
                           FontSize="17" 
                           FontFamily="Quicksand Medium"/>
        </DataTemplate>
        <DataTemplate x:Key="ToggleSwitchHeaderTemplate">
            <TextBlock Text="{Binding}"
                       FontSize="17"
                       FontFamily="Quicksand Medium"/>
        </DataTemplate>

        <DataTemplate x:Key="NumberPartListViewTemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Image
                    Source="/Assets/checkgreen.png"
                    Grid.RowSpan="2"
                    Width="24"
                    Height="24"
                    Margin="6"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center" />
                <TextBlock
                    Grid.Column="1"
                    Text="{Binding NumberPartId, Mode=OneTime}"
                    Style="{StaticResource BaseTextBlockStyle}"
                    Margin="12,6,0,0" />
                <TextBlock
                    Grid.Column="1"
                    Grid.Row="1"
                    Text="{Binding Customer.CustomerName, Mode=OneTime}"
                    Style="{StaticResource BodyTextBlockStyle}"
                    Margin="12,0,0,6" />
            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="SignatureFlowListViewTemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBlock
                    Text="{Binding Items.Count, ElementName=lvSignatureFlow}"
                    Grid.RowSpan="2"
                    Width="24"
                    Height="24"
                    Margin="6"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center" />
                <!--<TextBlock
                    Grid.Column="1"
                    Text="{Binding Name, Mode=OneTime}"
                    Style="{StaticResource BaseTextBlockStyle}"
                    Margin="12,6,0,0" />
                <TextBlock
                    Grid.Column="1"
                    Grid.Row="1"
                    Text="{Binding Customer_Name, Mode=OneTime}"
                    Style="{StaticResource BodyTextBlockStyle}"
                    Margin="12,0,0,6" />-->
            </Grid>
        </DataTemplate>

        <Style x:Key="ListViewItemTemplate" TargetType="{x:Type ListViewItem}">
            <Style.Triggers>
                <MultiTrigger>
                    <MultiTrigger.Conditions>
                        <Condition Property="IsSelected" Value="True" />
                    </MultiTrigger.Conditions>
                    <Setter Property="Background" Value="Red" />
                    <Setter Property="BorderBrush" Value="Transparent" />
                    <Setter Property="Foreground" Value="White"/>
                </MultiTrigger>
            </Style.Triggers>
        </Style>
    </Page.Resources>

    <Grid >
        <TabControl x:Name="Tab" Style="{StaticResource TabControlPivotStyle}" Background="#FFE0E0E0"  >
            <TabItem Height="40">
                <TabItem.Header>
                    <TextBlock Text="1." FontFamily="Quicksand Medium" FontSize="16" Foreground="Black"/>
                </TabItem.Header>
                <Grid Margin="100, 50, 100, 50">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="2*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Grid.ColumnSpan="2" VerticalAlignment="Top">
                        <ui:ToggleSwitch x:Name="tsIsEco"
                                         Header="¿El ECN corresponde a un cambio de ECO?"
                                         OffContent="No"
                                         OnContent="Si" 
                                         IsOn="{Binding IsEco, Mode=TwoWay}"
                                         FontFamily="Quicksand Medium"
                                         FontSize="17"
                                         Foreground="Black"
                                         HorizontalAlignment="Center"
                                         HorizontalContentAlignment="Center"
                                         HeaderTemplate="{StaticResource ToggleSwitchHeaderTemplate}"/>
                        <TextBox x:Name="txtEco"
                                 Text="{Binding Eco, Mode=TwoWay}"
                                 Visibility="{Binding TxtEcoVisibility}"
                                 VerticalAlignment="Center"
                                 Width="350"
                                 Margin="20, 0, 0, 0"
                                 Foreground="White"
                                 ui:ControlHelper.Header="No. de ECO"
                                 ui:ControlHelper.PlaceholderText="Ingresa el número de ECO"
                                 ui:ControlHelper.PlaceholderForeground="White"
                                 ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                                 ui:ControlHelper.CornerRadius="5" 
                                 FontFamily="Quicksan Medium"
                                 BorderThickness="0"
                                 FontSize="15" Background="#FFFF0033"/>
                        <ComboBox ItemsSource="{Binding EcoTypes}"
                                  DisplayMemberPath="EcoTypeName"
                                  SelectedValuePath="EcoTypeId"
                                  SelectedItem="{Binding SelectedEcoType, Mode=TwoWay}"
                                  Margin="20, 0, 0, 0"
                                  VerticalAlignment="Center"
                                  Visibility="{Binding CbEcoTypeVisibility}"
                                  Foreground="White"
                                  ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                                  ui:ControlHelper.CornerRadius="5" 
                                  FontFamily="Quicksan Medium"
                                  BorderThickness="0"
                                  FontSize="15"
                                  Width="350"
                                  Background="#FFFF0033"
                                  ui:ControlHelper.Header="Tipo de ECO" 
                                  ui:ControlHelper.PlaceholderText="Selecciona el tipo de ECO"
                                  ui:ControlHelper.PlaceholderForeground="White"/>
                    </StackPanel>
                    <StackPanel Grid.Row="1" Grid.ColumnSpan="2" >
                        <Label Content="Selecciona números de parte." Grid.Row="1" FontFamily="Quicksand Medium" FontSize="17"  Margin="0, 0, 0, 10"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Label Content="Seleccionados: " Margin="220, 0, 0, 0"/>
                            <Label Content="{Binding NumberParts.Count}" />
                            <Label Content="/10" />
                        </StackPanel>
                        <ListView x:Name="lvNumberParts" Background="#FFD6D6D6" Height="200" SelectionMode="Single" ItemTemplate="{StaticResource NumberPartListViewTemplate}" ItemsSource="{Binding NumberParts}" SelectedItem="{Binding SelectedNumberPart}" dd:DragDrop.IsDragSource="True" dd:DragDrop.IsDropTarget="True"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button x:Name="btnAddNumberPart" Background="Transparent" Visibility="{Binding BtnAddNumberPartVisibility}" Command="{Binding OpenNumberPartsDialogCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <Label Content="Agregar" FontFamily="Quicksand Medium" FontSize="14" VerticalAlignment="Center" Foreground="#FF189B24" />
                                    <Image Source="/Assets/add.png" Height="24" Margin="5"/>
                                </StackPanel>
                            </Button>
                            <Button x:Name="btnDeleteNumberPart" Background="Transparent" Visibility="{Binding BtnRemoveNumberPartVisibility}" Command="{Binding RemoveNumberPartCommand}" >
                                <StackPanel Orientation="Horizontal">
                                    <Label Content="Eliminar" FontFamily="Quicksand Medium" FontSize="14" VerticalAlignment="Center" Foreground="#FFE40F0F"/>
                                    <Image Source="/Assets/delete.png" Height="24" Margin="5"/>
                                </StackPanel>
                            </Button>

                        </StackPanel>
                    </StackPanel>
                    <Button Grid.Row="1"
                            Grid.Column="1"
                            Background="Transparent"
                            BorderBrush="Transparent"
                            Foreground="Black"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            FontFamily="Quicksand Medium"
                            FontSize="14" Click="Button_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Siguiente" VerticalAlignment="Center"/>
                            <Image Source="/Assets/rightred.png" Width="30"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </TabItem>
            <TabItem Height="40">
                <TabItem.Header>
                    <TextBlock Text="2." FontFamily="Quicksand Medium" FontSize="16" Foreground="Black"/>
                </TabItem.Header>
                <Grid Margin="80">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <DatePicker x:Name="dpStartDate"
                                SelectedDate="{Binding ECN.StartDate, Mode=TwoWay}"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Bottom"
                                IsEnabled="False"
                                Foreground="White"
                                Margin="10, 0, 10, 0"
                                FontFamily="Quicksand Medium"
                                FontSize="15"
                                ui:ControlHelper.Header="Fecha de inicio"
                                ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                                ui:ControlHelper.CornerRadius="5"/>
                    <DatePicker x:Name="dpEndDate"
                                SelectedDate="{Binding ECN.EndDate}"
                                Grid.Column="1"
                                Margin="10, 0, 10, 0"
                                VerticalAlignment="Bottom"
                                HorizontalAlignment="Stretch"
                                FontFamily="Quicksand Medium"
                                FontSize="15"
                                IsEnabled="False"
                                ui:ControlHelper.Header="Fecha de cierre"
                                ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                                ui:ControlHelper.CornerRadius="5"/>
                    <ComboBox x:Name="cbChangeType"
                              Grid.Row="1"
                              Grid.ColumnSpan="2"
                              Background="#FFFF0033"
                              BorderBrush="Transparent"
                              Foreground="White"
                              Margin="10, 0, 150, 0"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Center"
                              FontFamily="Quicksand Medium"
                              FontSize="15"
                              ItemsSource="{Binding ChangeTypes}"
                              DisplayMemberPath="ChangeTypeName"
                              SelectedValuePath="ChangeTypeId"
                              SelectedItem="{Binding SelectedChangeType, Mode=TwoWay}"
                              ui:ControlHelper.Header="Tipo de cambio"
                              ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                              ui:ControlHelper.PlaceholderText="Seleccione un tipo de cambio"
                              ui:ControlHelper.PlaceholderForeground="White"
                              ui:ControlHelper.CornerRadius="5"/>
                    <Button Background="Transparent"
                            Grid.Row="3"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Left"
                            FontFamily="Quicksand Medium"
                            FontSize="15" Click="Button_Click_4">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Assets/leftred.png" Width="30"/>
                            <TextBlock Text="Anterior" VerticalAlignment="Center" Foreground="Black"/>
                        </StackPanel>
                    </Button>
                    <Button 
                            Background="Transparent"
                            Grid.Row="3"
                            Grid.Column="1"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Right"
                            FontFamily="Quicksand Medium"
                            FontSize="15" Click="Button_Click_1">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Siguiente" VerticalAlignment="Center" Foreground="Black" />
                            <Image Source="/Assets/rightred.png" Width="30" />
                        </StackPanel>
                    </Button>
                </Grid>
            </TabItem>
            <TabItem Height="40">
                <TabItem.Header>
                    <TextBlock Text="3." FontFamily="Quicksand Medium" FontSize="16" Foreground="Black"/>
                </TabItem.Header>
                <Grid Margin="80">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <ComboBox x:Name="cbDocumentType"
                              Grid.ColumnSpan="1"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Top"
                              FontFamily="Quicksand Medium"
                              Background="#FFFF0033"
                              FontSize="15"
                              Foreground="White"
                              BorderBrush="Transparent"
                              ItemsSource="{Binding DocumentTypes}"
                              DisplayMemberPath="DocumentTypeName"
                              SelectedValuePath="DocumentTypeId"
                              SelectedItem="{Binding SelectedDocumentType, Mode=TwoWay}"
                              ui:ControlHelper.Header="Tipo de documento"
                              ui:ControlHelper.PlaceholderText="Seleccione un tipo de documento"
                              ui:ControlHelper.PlaceholderForeground="White"
                              ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                              ui:ControlHelper.CornerRadius="5"/>
                    <DatePicker x:Name="dpDocumentUpgradeDate"
                                Grid.Column="1"
                                SelectedDate="{Binding ECN.DocumentUpgradeDate, Mode=TwoWay}"
                                VerticalAlignment="Top"
                                Margin="15, 0, 0, 0"
                                FontFamily="Quicksand Medium"
                                FontSize="15"
                                BorderBrush="Red"
                                ui:ControlHelper.Header="Fecha de actualización del documento"
                                ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                                ui:ControlHelper.PlaceholderText="Seleccione una fecha"
                                ui:ControlHelper.PlaceholderForeground="White"
                                ui:ControlHelper.CornerRadius="5"/>
                    <TextBox x:Name="txtDocumentNo" 
                             Grid.Row="1"
                             Text="{Binding ECN.DocumentNo, Mode=TwoWay}"
                             VerticalAlignment="Top"
                             Margin="0, 0, 20, 0"
                             Background="#FFFF0033"
                             BorderBrush="Transparent"
                             FontFamily="Quicksand Medium"
                             Foreground="White"
                             FontSize="15"
                             ui:ControlHelper.Header="No. de Documento"
                             ui:ControlHelper.PlaceholderText="Ingresa el número del documento"
                             ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                             ui:ControlHelper.PlaceholderForeground="White"
                             ui:ControlHelper.CornerRadius="5"/>
                    <TextBox x:Name="txtDocumentName" 
                             Text="{Binding ECN.DocumentName, Mode=TwoWay}"
                             Grid.Row="2"
                             Grid.ColumnSpan="2"
                             Margin="0, 0, 20, 0"
                             Background="#FFFF0033"
                             BorderBrush="Transparent"
                             VerticalAlignment="Top"
                             FontFamily="Quicksand Medium"
                             FontSize="15"
                             Foreground="White"
                             ui:ControlHelper.Header="Nombre de Documento"
                             ui:ControlHelper.PlaceholderText="Ingresa el nombre del documento"
                             ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                             ui:ControlHelper.PlaceholderForeground="White"
                             ui:ControlHelper.CornerRadius="5"/>
                    <Button Background="Transparent"
                            Foreground="White"
                            Grid.Column="1"
                            Grid.Row="4"
                            FontFamily="Quicksand Medium"
                            FontSize="15"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Margin="5" Click="Button_Click_2">
                        <StackPanel Orientation="Horizontal" >
                            <TextBlock Text="Siguiente" VerticalAlignment="Center" Foreground="Black"/>
                            <Image Source="/Assets/rightred.png" Width="30"/>
                        </StackPanel>
                    </Button>
                    <Button Background="Transparent"
                            Foreground="White"
                            Grid.Row="4"
                            FontFamily="Quicksand Medium"
                            FontSize="15"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom"
                            Margin="5" Click="Button_Click_5">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Assets/leftred.png" Width="30"/>
                            <TextBlock Text="Anterior" VerticalAlignment="Center" Foreground="Black"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </TabItem>
            <TabItem Height="40">
                <TabItem.Header>
                    <TextBlock Text="4." FontFamily="Quicksand Medium" FontSize="16" Foreground="Black"/>
                </TabItem.Header>
                <Grid Margin="80"  >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <TextBlock Text="Documento" FontFamily="Quicksand" Foreground="Red" FontSize="16"/>
                    <TextBox x:Name="txtActualDocumentRevisionLvL"
                              Text="{Binding ECN.OldDocumentLvl, Mode=TwoWay}"
                              FontFamily="Quicksand Medium"
                              FontSize="15"
                              Margin="0, 0, 10, 0"
                              Background="#FFFF0033"
                              Foreground="White"
                              BorderBrush="Transparent"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Center"
                              ui:ControlHelper.Header="Nivel de revisión actual "
                              ui:ControlHelper.PlaceholderText="Seleccione el nivel actual"
                              ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                              ui:ControlHelper.PlaceholderForeground="White"
                              ui:ControlHelper.CornerRadius="5"/>
                    <TextBox x:Name="txtNewDocumentRevisionLvL"
                             Text="{Binding ECN.DocumentLvl, Mode=TwoWay}"
                              Grid.Column="1"
                              FontFamily="Quicksand Medium"
                              FontSize="15"
                              Foreground="White"
                              Background="#FFFF0033"
                              BorderBrush="Transparent"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Center"
                              ui:ControlHelper.Header="Nivel de revisión nuevo "
                              ui:ControlHelper.PlaceholderText="Seleccione el nivel nuevo"
                              ui:ControlHelper.PlaceholderForeground="White"
                              ui:ControlHelper.CornerRadius="5"
                              ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"/>
                    <TextBlock Grid.Row="1" Text="Dibujo" FontFamily="Quicksand" Foreground="Red" FontSize="16"/>
                    <TextBox x:Name="txtActualDrawingRevisionLvL"
                              Text="{Binding ECN.OldDrawingLvl, Mode=TwoWay}"
                              Grid.Row="1"
                              FontFamily="Quicksand Medium"
                              FontSize="15"
                              Foreground="White"
                              Background="#FFFF0033"
                              BorderBrush="Transparent"
                              Margin="0, 0, 10, 0"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Center"
                              ui:ControlHelper.Header="Nivel de revisión actual "
                              ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                              ui:ControlHelper.PlaceholderText="Seleccione el nivel actual"
                              ui:ControlHelper.PlaceholderForeground="White"
                              ui:ControlHelper.CornerRadius="5"/>
                    <TextBox x:Name="txtNewDrawingRevisionLvL"
                             Text="{Binding ECN.DrawingLvl, Mode=TwoWay}"
                              Grid.Row="1"
                              Grid.Column="1"
                              FontFamily="Quicksand Medium"
                              FontSize="15"
                              Foreground="White"
                              Background="#FFFF0033"
                              BorderBrush="Transparent"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Center"
                              ui:ControlHelper.Header="Nivel de revisión nuevo"
                              ui:ControlHelper.PlaceholderText="Seleccione el nivel nuevo"
                              ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                              ui:ControlHelper.PlaceholderForeground="White"
                              ui:ControlHelper.CornerRadius="5"/>
                    <Button Background="Transparent"
                            Grid.Column="1"
                            Grid.Row="3"
                            FontFamily="Quicksand Medium"
                            FontSize="15"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Margin="20" Click="Button_Click_3">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Siguiente" VerticalAlignment="Center" Foreground="Black"/>
                            <Image Source="/Assets/rightred.png" Width="30"/>
                        </StackPanel>
                    </Button>
                    <Button Background="Transparent"
                            Grid.Column="0"
                            Grid.Row="3"
                            FontFamily="Quicksand Medium"
                            FontSize="15"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom"
                            Margin="20" Click="Button_Click_6">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Assets/leftred.png" Width="32"/>
                            <TextBlock Text="Anterior" VerticalAlignment="Center" Foreground="Black"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </TabItem>
            <TabItem Height="40">
                <TabItem.Header>
                    <TextBlock Text="5." FontFamily="Quicksand Medium" FontSize="16" Foreground="Black"/>
                </TabItem.Header>
                <Grid  Margin="100">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <TextBox x:Name="txtDescription"
                             Text="{Binding ECN.ChangeDescription, Mode=TwoWay}"
                             Background="#FFFF0033"
                             Foreground="White"
                             BorderThickness="0"
                             FontFamily="Quicksand Medium"
                             FontSize="15"
                             Margin="25"
                             ui:ControlHelper.Header="Descripción del cambio"
                             ui:ControlHelper.PlaceholderText="¿Qué estoy cambiando?"
                             ui:ControlHelper.PlaceholderForeground="White"
                             ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                             ui:ControlHelper.CornerRadius="10"/>
                    <TextBox x:Name="txtJustification"
                             Text="{Binding ECN.ChangeJustification, Mode=TwoWay}"
                             Grid.Column="1"
                             Background="#FFFF0033"
                             BorderThickness="0"
                             FontFamily="Quicksand Medium"
                             FontSize="15"
                             Margin="25"
                             Foreground="White"
                             ui:ControlHelper.Header="Justificación del cambio"
                             ui:ControlHelper.PlaceholderText="¿Por qué lo estoy cambiando?"
                             ui:ControlHelper.PlaceholderForeground="White"
                             ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                             ui:ControlHelper.CornerRadius="10"/>
                    <TextBox x:Name="txtManufacturingAffectations"
                             Text="{Binding ECN.ManufacturingAffectations, Mode=TwoWay}"
                             Grid.Row="1"
                             Grid.ColumnSpan="2"
                             Background="#FFFF0033"
                             BorderThickness="0"
                             FontFamily="Quicksand Medium"
                             Foreground="White"
                             Margin="25"
                             FontSize="15"
                             ui:ControlHelper.Header="Afectaciones de manufactura"
                             ui:ControlHelper.PlaceholderText="¿Qué procesos afecta el cambio?"
                             ui:ControlHelper.PlaceholderForeground="White"
                             ui:ControlHelper.HeaderTemplate="{StaticResource RequiredHeaderTemplate}"
                             ui:ControlHelper.CornerRadius="10"/>
                    <Button Background="Transparent"
                            Grid.Row="3"
                            FontFamily="Quicksand Medium"
                            FontSize="15" Click="Button_Click_7">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Assets/leftred.png" Width="30"/>
                            <TextBlock Text="Anterior" VerticalAlignment="Center" Foreground="Black"/>
                        </StackPanel>
                    </Button>
                    <Button Background="Transparent"
                            Grid.Row="3"
                            Grid.Column="1"
                            FontFamily="Quicksand Medium"
                            FontSize="15"
                            HorizontalAlignment="Right" Click="Button_Click_8">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Siguiente" VerticalAlignment="Center" Foreground="Black"/>
                            <Image Source="/Assets/rightred.png" Width="30"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </TabItem>
            <TabItem Height="40" >
                <TabItem.Header>
                    <TextBlock Text="6." FontFamily="Quicksand Medium" FontSize="16" Foreground="Black"/>
                </TabItem.Header>
                <Grid Margin="80">
                    <ui:ScrollViewerEx >
                        <StackPanel VerticalAlignment="Stretch">
                            <TextBlock Text="Adjuntos" FontFamily="Quicksand Medium" FontSize="18" Foreground="Crimson" Margin="0, 10, 0, 10"/>
                            <ListBox x:Name="lbAttachments" Background="#FFD6D6D6" Width="Auto" Height="Auto" ItemsSource="{Binding Attacheds}" SelectedItem="{Binding SelectedAttached}">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Image Source="{Binding ImageLocation, Mode=OneTime}" Margin="5" Width="32"/>
                                            <TextBlock Grid.Column="1" Text="{Binding AttachmentFilename}" Style="{DynamicResource BaseTextBlockStyle}" VerticalAlignment="Center" Margin="10, 0, 0, 0" />
                                        </Grid>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom">
                                <Button x:Name="btnAddAttachment" Background="Transparent" Command="{Binding OpenFileDialogCommand}">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Adjuntar" FontFamily="Quicksand Medium" FontSize="15" VerticalAlignment="Center"/>
                                        <Image Source="/Assets/attach.png" Width="28" Margin="5"/>
                                    </StackPanel>
                                </Button>
                                <Button x:Name="btnDeleteAttachment" Background="Transparent" Visibility="{Binding BtnRemoveAttachedVisibility}" Command="{Binding RemoveAttachedCommand}">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Quitar" FontFamily="Quicksand Medium" FontSize="15" VerticalAlignment="Center"/>
                                        <Image Source="/Assets/delete.png" Width="24" Margin="5"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </StackPanel>
                    </ui:ScrollViewerEx>
                    <Button Content="Terminar" Background="Crimson" Foreground="Wheat" FontFamily="Quicksand Medium" HorizontalAlignment="Right" VerticalAlignment="Bottom" Command="{Binding SaveECNCommand}"/>
                </Grid>
            </TabItem>
            <TabItem Height="40">
                <TabItem.Header>
                    <TextBlock Text="7." FontFamily="Quicksand Medium" FontSize="16" Foreground="Black"/>
                </TabItem.Header>
                <Grid Margin="50">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <StackPanel>
                        <TextBlock Text="Flujo de firmas" FontFamily="Quicksand Medium" FontSize="18" Margin="0, 0, 0, 25"/>
                        <ui:SimpleStackPanel Orientation="Horizontal" Spacing="5">
                            <TextBlock Text="Firma" FontFamily="Quicksand Medium" FontSize="18" VerticalAlignment="Center"/>
                            <Image Source="/Assets/signed_.png" Width="36" />
                        </ui:SimpleStackPanel>
                        <StackPanel Orientation="Horizontal" >
                            <ListBox x:Name="lbSign" Height="350" Width="350" Background="LightGray" Margin="0, 10, 0, 0" ItemsSource="{Binding SelectedForSign}" AlternationCount="{Binding SelectedForSign.Count}" dd:DragDrop.IsDragSource="True" dd:DragDrop.IsDropTarget="True">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="{Binding TemplatedParent.(ItemsControl.AlternationIndex), RelativeSource={RelativeSource TemplatedParent}}" FontSize="18" FontWeight="Bold" VerticalAlignment="Center" Grid.RowSpan="2"/>
                                            <Image Source="/Assets/signed_.png" Grid.Column="1" Width="32" Margin="0, 0, 10, 0" Grid.RowSpan="2"/>
                                            <TextBlock Grid.Column="2" VerticalAlignment="Center" FontWeight="SemiBold"><Run Text="{Binding EmployeeFirstName}"/><Run Text=" "/><Run Text="{Binding EmployeeLastName}"/></TextBlock>
                                            <TextBlock Grid.Column="2" Grid.Row="1" Text="{Binding Department.DepartmentName}" Foreground="#FFFF0033" FontWeight="SemiBold" />
                                        </Grid>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                            <Button x:Name="btnAddSignature" Background="Transparent" VerticalAlignment="Bottom" Command="{Binding OpenSignatureFlowDialogCommand}">
                                <StackPanel>
                                    <Image Source="/Assets/add.png" Width="28" />
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Grid.Row="1" Margin="10, 50, 0, 0">
                        <ui:SimpleStackPanel Orientation="Horizontal" Spacing="5">
                            <TextBlock Text="Vista" FontFamily="Quicksand Medium" FontSize="18"  VerticalAlignment="Center"/>
                            <Image Source="/Assets/view.png" Width="36"/>
                        </ui:SimpleStackPanel>
                        <ListView  Height="350" Width="350" Margin="0, 10, 0, 0" Background="LightGray" HorizontalAlignment="Left" ItemsSource="{Binding SelectedForView}" dd:DragDrop.IsDragSource="True" dd:DragDrop.IsDropTarget="True" >
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>
                                        <Image Source="/Assets/view.png" Width="32" Margin="10" Grid.RowSpan="2"/>
                                        <TextBlock Grid.Column="1" VerticalAlignment="Center" FontWeight="SemiBold"><Run Text="{Binding EmployeeFirstName}"/><Run Text=" "/><Run Text="{Binding EmployeeLastName}"/></TextBlock>
                                        <TextBlock Grid.Column="1" Grid.Row="1" Text="{Binding Department.DepartmentName}" Foreground="#FFFF0033" FontWeight="SemiBold" />
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>

</Page>
